<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DYNAMIC DUO POINT CALCULATOR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
        }
        .result-item { display: flex; justify-content: space-between; align-items: center; }
        .penalty { color: #ef4444; /* red-500 */ }
        .bonus { color: #22c55e; /* green-500 */ }
        .final-score { font-size: 2.5rem; font-weight: 700; }
        .negative-score { color: #ef4444; /* red-500 */ }
        .positive-score { color: #818cf8; /* indigo-400 */ }
        .cap-note {
            font-size: 0.8rem;
            color: #ef4444; /* red-500 */
            text-align: right;
            padding-left: 1rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex items-center justify-center p-4">
    <!-- Main Calculator Body -->
    <div class="w-full max-w-2xl mx-auto">
        <div class="bg-gray-800 shadow-2xl rounded-2xl p-6 md:p-10">
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-white">DYNAMIC DUO POINT CALCULATOR</h1>
                <p class="text-gray-400 mt-2">Enter your team's hours to calculate the final score precisely.</p>
            </div>

            <form id="calculatorForm" class="space-y-6">
                <div>
                    <label for="session" class="block text-sm font-medium text-gray-300 mb-2">Select Session</label>
                    <select id="session" name="session" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                        <option value="morning">üåÖ Morning Session (5 AM ‚Äì 1 PM)</option>
                        <option value="noon">‚òÄÔ∏è Noon Session (1 PM ‚Äì 6 PM)</option>
                        <option value="evening">üåô Evening Session (6 PM ‚Äì 5 AM)</option>
                    </select>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="member1_hours" class="block text-sm font-medium text-gray-300 mb-2">Member 1: Current Hours</label>
                        <input type="number" step="0.01" id="member1_hours" name="member1_hours" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3" placeholder="e.g., 4.5" required>
                    </div>
                    <div>
                        <label for="member2_hours" class="block text-sm font-medium text-gray-300 mb-2">Member 2: Current Hours</label>
                        <input type="number" step="0.01" id="member2_hours" name="member2_hours" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3" placeholder="e.g., 3.75" required>
                    </div>
                </div>
                
                <div id="totalHoursContainer" class="hidden pt-6 border-t border-gray-700">
                     <p class="text-sm font-medium text-gray-300 mb-4">Total time on Yeolpumta (‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü)</p>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <label for="member1_total_hours" class="block text-xs font-medium text-gray-400 mb-2">Member 1: Total Today</label>
                            <input type="number" step="0.01" id="member1_total_hours" name="member1_total_hours" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3" placeholder="e.g., 12.5">
                         </div>
                         <div>
                            <label for="member2_total_hours" class="block text-xs font-medium text-gray-400 mb-2">Member 2: Total Today</label>
                            <input type="number" step="0.01" id="member2_total_hours" name="member2_total_hours" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3" placeholder="e.g., 14">
                         </div>
                     </div>
                </div>

                <div class="border-t border-gray-700 pt-6">
                     <p class="text-sm font-medium text-gray-300 mb-4">Late Submission</p>
                     <div class="relative flex items-start">
                        <div class="flex items-center h-5">
                            <input id="late_submission" name="late_submission" type="checkbox" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 bg-gray-700 border-gray-600 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="late_submission" class="font-medium text-gray-300">Did anyone on the team submit late?</label>
                        </div>
                    </div>
                </div>

                <div>
                    <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300 ease-in-out">
                        Calculate Score
                    </button>
                </div>
            </form>

            <div id="results" class="mt-10 hidden">
                 <h2 class="text-2xl font-bold text-center mb-6">Score Breakdown</h2>
                 <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <div id="breakdown-list" class="space-y-3 text-lg"></div>
                    <div class="border-t-2 border-dashed border-gray-600 my-4"></div>
                    <div class="text-center">
                         <p class="text-gray-400 font-medium">Final Team Score</p>
                         <p id="final-score" class="final-score positive-score">0</p>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <script>
        const sessionSelect = document.getElementById('session');
        const totalHoursContainer = document.getElementById('totalHoursContainer');
        const form = document.getElementById('calculatorForm');
        const resultsDiv = document.getElementById('results');

        sessionSelect.addEventListener('change', function() {
            if (this.value === 'noon' || this.value === 'evening') {
                totalHoursContainer.classList.remove('hidden');
            } else {
                totalHoursContainer.classList.add('hidden');
            }
        });

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            resultsDiv.classList.add('hidden'); // Hide previous results before new calculation

            const session = sessionSelect.value;
            const hours1 = parseFloat(document.getElementById('member1_hours').value) || 0;
            const hours2 = parseFloat(document.getElementById('member2_hours').value) || 0;
            const totalHours1_input = parseFloat(document.getElementById('member1_total_hours').value);
            const totalHours2_input = parseFloat(document.getElementById('member2_total_hours').value);
            const isLate = document.getElementById('late_submission').checked;

            const totalHours1 = isNaN(totalHours1_input) ? hours1 : totalHours1_input;
            const totalHours2 = isNaN(totalHours2_input) ? hours2 : totalHours2_input;
            
            const DAILY_CAP = 16;
            let pointsPerHour = 1, targetHours = 0, bonusPointsPerHour = 1;

            if (session === 'morning' || session === 'evening') {
                pointsPerHour = 2;
                targetHours = 4;
            }

            let breakdownHTML = '';
            let penalties = [];
            
            const previousHours1 = (session === 'morning') ? 0 : Math.max(0, totalHours1 - hours1);
            const previousHours2 = (session === 'morning') ? 0 : Math.max(0, totalHours2 - hours2);

            let capMessage1 = '', capMessage2 = '';
            const billableHours1 = Math.min(hours1, Math.max(0, DAILY_CAP - previousHours1));
            if (billableHours1 < hours1) {
                capMessage1 = `Note: Daily hours capped at 16. Points awarded for only ${billableHours1.toFixed(2)} of the ${hours1.toFixed(2)} hours.`;
            }
            const billableHours2 = Math.min(hours2, Math.max(0, DAILY_CAP - previousHours2));
            if (billableHours2 < hours2) {
                capMessage2 = `Note: Daily hours capped at 16. Points awarded for only ${billableHours2.toFixed(2)} of the ${hours2.toFixed(2)} hours.`;
            }

            const calculateMemberPoints = (hours) => {
                let basePoints = 0, bonusPoints = 0;
                if (session === 'noon') { basePoints = hours * pointsPerHour; } 
                else {
                    if (hours >= targetHours) {
                        basePoints = targetHours * pointsPerHour;
                        bonusPoints = (hours - targetHours) * bonusPointsPerHour;
                    } else { basePoints = hours * pointsPerHour; }
                }
                return { total: basePoints + bonusPoints, bonus: bonusPoints };
            };

            const member1Result = calculateMemberPoints(billableHours1);
            const member2Result = calculateMemberPoints(billableHours2);
            let initialPoints = member1Result.total + member2Result.total;
            let totalScore = initialPoints;

            breakdownHTML += `<div class="result-item"><span>Member 1 (${hours1.toFixed(2)} hrs):</span><span class="font-semibold">${member1Result.total.toFixed(2)} pts</span></div>`;
            if (capMessage1) breakdownHTML += `<div class="cap-note">${capMessage1}</div>`;
            if (member1Result.bonus > 0) breakdownHTML += `<div class="result-item text-sm pl-4"><span>‚îî Member 1 Bonus:</span><span class="font-semibold bonus">+${member1Result.bonus.toFixed(2)}</span></div>`;
            
            breakdownHTML += `<div class="result-item mt-2"><span>Member 2 (${hours2.toFixed(2)} hrs):</span><span class="font-semibold">${member2Result.total.toFixed(2)} pts</span></div>`;
            if (capMessage2) breakdownHTML += `<div class="cap-note">${capMessage2}</div>`;
            if (member2Result.bonus > 0) breakdownHTML += `<div class="result-item text-sm pl-4"><span>‚îî Member 2 Bonus:</span><span class="font-semibold bonus">+${member2Result.bonus.toFixed(2)}</span></div>`;
            
            breakdownHTML += `<div class="result-item border-t border-gray-700 pt-2 mt-2"><strong>Initial Team Total:</strong><strong>${initialPoints.toFixed(2)} pts</strong></div>`;
            
            if (isLate) {
                const totalBonus = member1Result.bonus + member2Result.bonus;
                totalScore -= 2;
                totalScore -= totalBonus;
                penalties.push({ text: "Late Submission", value: -2 });
                if (totalBonus > 0) { penalties.push({ text: "Bonus Cancelled", value: `-${totalBonus.toFixed(2)}` }); }
            }

            if (session !== 'noon') {
                const failed1 = hours1 < targetHours;
                const failed2 = hours2 < targetHours;
                if (failed1 && failed2) {
                    totalScore -= 4;
                    penalties.push({ text: "Both failed target", value: -4 });
                } else if (failed1 || failed2) {
                    totalScore -= 2;
                    penalties.push({ text: `One member failed target`, value: -2 });
                }
            }
            
            const breakdownList = document.getElementById('breakdown-list');
            const finalScoreEl = document.getElementById('final-score');

            if(penalties.length > 0){
                 breakdownHTML += `<div class="result-item pt-4"><strong class="penalty">Penalties:</strong><span></span></div>`;
                 penalties.forEach(p => {
                     breakdownHTML += `<div class="result-item text-sm pl-4"><span class="penalty">${p.text}</span><span class="font-semibold penalty">${p.value}</span></div>`;
                 });
            }

            // --- NEW: Add integrated health warning if cap is triggered ---
            if (capMessage1 || capMessage2) {
                const warningText = `
                    <div class="mt-6 p-4 border-t-2 border-red-500 border-dashed">
                        <h3 class="text-lg font-bold text-red-400 mb-3 text-center">‚ö†Ô∏è ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶™‡¶°‡¶º‡¶æ‡¶∂‡ßã‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶Ø‡ßá‡¶∏‡¶¨ ‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶Æ‡ßÅ‡¶ñ‡ßÄ‡¶® ‡¶π‡¶¨‡ßá‡¶®:</h3>
                        <ol class="text-left list-decimal list-inside space-y-2 text-red-300 text-sm">
                            <li><strong>‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨:</strong> ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶™‡¶°‡¶º‡¶æ‡¶∂‡ßã‡¶®‡¶æ‡ßü ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑ ‡¶è‡¶ï‡¶æ ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶Ö‡¶≠‡ßç‡¶Ø‡¶∏‡ßç‡¶§ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü, ‡¶´‡¶≤‡ßá ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï ‡¶ò‡¶®‡¶ø‡¶∑‡ßç‡¶†‡¶§‡¶æ ‡¶¨‡¶ú‡¶æ‡ßü ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶ï‡¶†‡¶ø‡¶® ‡¶π‡ßü‡•§</li>
                            <li><strong>‡¶¶‡ßÅ‡¶∞‡ßç‡¶¨‡¶≤ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó:</strong> ‡¶¶‡ßÄ‡¶∞‡ßç‡¶ò‡¶¶‡¶ø‡¶® ‡¶è‡¶ï‡¶æ ‡¶™‡¶°‡¶º‡¶æ‡¶∂‡ßã‡¶®‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶•‡¶æ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶ì ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶§‡¶ø ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡ßá‡¶∞ ‡¶¶‡¶ï‡ßç‡¶∑‡¶§‡¶æ ‡¶®‡¶∑‡ßç‡¶ü ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü ‚Äî ‡¶Ø‡¶æ ‡¶¶‡¶æ‡¶Æ‡ßç‡¶™‡¶§‡ßç‡¶Ø ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶ñ‡ßÅ‡¶¨ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§</li>
                            <li><strong>‡¶Ö‡¶∏‡¶æ‡¶Æ‡¶û‡ßç‡¶ú‡¶∏‡ßç‡¶Ø‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞:</strong> ‡¶Ø‡¶¶‡¶ø ‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø‡¶á ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶è‡¶ï‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶∏‡¶ô‡ßç‡¶ó‡ßÄ‡¶∞ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶ì ‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡¶¨‡¶π‡ßá‡¶≤‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡ßá‡•§</li>
                            <li><strong>‡¶Ö‡¶¨‡¶π‡ßá‡¶≤‡¶æ ‡¶ì ‡¶è‡¶ï‡¶æ‡¶ï‡¶ø‡¶§‡ßç‡¶¨:</strong> ‡¶Ø‡¶ñ‡¶® ‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ ‡¶¨‡¶æ ‡¶∏‡ßç‡¶§‡ßç‡¶∞‡ßÄ ‡¶∏‡¶æ‡¶∞‡¶æ‡¶ï‡ßç‡¶∑‡¶£ ‡¶¨‡ßç‡¶Ø‡¶∏‡ßç‡¶§ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶ñ‡¶® ‡¶Ö‡¶™‡¶∞‡¶ú‡¶® ‡¶®‡¶ø‡¶ú‡ßá‡¶ï‡ßá ‡¶Ö‡¶¨‡¶π‡ßá‡¶≤‡¶ø‡¶§ ‡¶Æ‡¶®‡ßá ‡¶ï‡¶∞‡ßá; ‡¶è‡¶§‡ßá ‡¶∏‡¶Ç‡¶∏‡¶æ‡¶∞‡ßá‡¶∞ ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ ‡¶ì ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶®‡¶∑‡ßç‡¶ü ‡¶π‡ßü‡•§</li>
                            <li><strong>‡¶Ö‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨ ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶∂‡¶æ:</strong> ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶Ö‡¶ß‡ßç‡¶Ø‡ßü‡¶® ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∏‡¶Æ‡ßü ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶®‡¶ø‡¶ñ‡ßÅ‡¶Å‡¶§ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï‡¶§‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá, ‡¶Ø‡¶æ ‡¶™‡¶∞‡ßá ‡¶∏‡¶ô‡ßç‡¶ó‡ßÄ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Ö‡¶Ø‡ßå‡¶ï‡ßç‡¶§‡¶ø‡¶ï ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶∂‡¶æ ‡¶ì ‡¶¨‡¶ø‡¶∞‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶π‡ßü‡•§</li>
                            <li><strong>‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï ‡¶ï‡ßç‡¶≤‡¶æ‡¶®‡ßç‡¶§‡¶ø:</strong> ‡¶¶‡¶ø‡¶®‡ßá ‡ßß‡ß¨ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ ‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ ‡¶∂‡¶∞‡ßÄ‡¶∞ ‡¶ì ‡¶Æ‡¶®‡ßá‡¶∞ ‡¶∂‡¶ï‡ßç‡¶§‡¶ø ‡¶∂‡ßÅ‡¶∑‡ßá ‡¶®‡ßá‡ßü ‚Äî ‡¶´‡¶≤‡ßá ‡¶¶‡¶æ‡¶Æ‡ßç‡¶™‡¶§‡ßç‡¶Ø ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ, ‡¶ß‡ßà‡¶∞‡ßç‡¶Ø ‡¶ì ‡¶Æ‡¶®‡ßã‡¶Ø‡ßã‡¶ó ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∂‡¶ï‡ßç‡¶§‡¶ø ‡¶ï‡¶Æ‡ßá ‡¶Ø‡¶æ‡ßü‡•§</li>
                            <li><strong>‡¶¶‡¶æ‡¶Æ‡ßç‡¶™‡¶§‡ßç‡¶Ø ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶≠‡¶æ‡¶ô‡¶®:</strong> ‡¶è‡¶∏‡¶¨ ‡¶Ö‡¶≠‡ßç‡¶Ø‡¶æ‡¶∏ ‡¶Ø‡¶¶‡¶ø ‡¶¨‡¶ø‡¶¨‡¶æ‡¶π‡ßá‡¶∞ ‡¶™‡¶∞‡¶ì ‡¶ö‡¶≤‡¶§‡ßá ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶¨‡ßá ‡¶ß‡ßÄ‡¶∞‡ßá ‡¶ß‡ßÄ‡¶∞‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá‡¶∞ ‡¶â‡¶∑‡ßç‡¶£‡¶§‡¶æ ‡¶π‡¶æ‡¶∞‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡ßü, ‡¶ï‡¶≤‡¶π ‡¶¨‡¶æ‡ßú‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∂‡ßá‡¶∑ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∏‡¶Ç‡¶∏‡¶æ‡¶∞ ‡¶≠‡ßá‡¶ô‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§</li>
                        </ol>
                    </div>
                `;
                breakdownHTML += warningText;
            }

            breakdownList.innerHTML = breakdownHTML;
            const finalScore = totalScore.toFixed(2);
            finalScoreEl.textContent = finalScore;
            finalScoreEl.className = 'final-score ' + (finalScore < 0 ? 'negative-score' : 'positive-score');
            
            resultsDiv.classList.remove('hidden');
        });
    </script>
</body>
</html>


